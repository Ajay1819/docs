<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Flashbots Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Flashbots Docs Blog Atom Feed"><title data-react-helmet="true">Search Sponsored TX | Flashbots Docs</title><meta data-react-helmet="true" property="og:url" content="https://flashbots.github.io/docs/searcher-sponsored-tx"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Search Sponsored TX | Flashbots Docs"><meta data-react-helmet="true" name="description" content="======================="><meta data-react-helmet="true" property="og:description" content="======================="><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://flashbots.github.io/docs/searcher-sponsored-tx"><link data-react-helmet="true" rel="alternate" href="https://flashbots.github.io/docs/searcher-sponsored-tx" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://flashbots.github.io/docs/searcher-sponsored-tx" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.ae3f2683.css">
<link rel="preload" href="/docs/assets/js/styles.e83b258e.js" as="script">
<link rel="preload" href="/docs/assets/js/runtime~main.ec0e648e.js" as="script">
<link rel="preload" href="/docs/assets/js/main.dd915aba.js" as="script">
<link rel="preload" href="/docs/assets/js/1.5a7c97b5.js" as="script">
<link rel="preload" href="/docs/assets/js/2.4e16bc7b.js" as="script">
<link rel="preload" href="/docs/assets/js/3.b91f50fa.js" as="script">
<link rel="preload" href="/docs/assets/js/1be78505.49375c8c.js" as="script">
<link rel="preload" href="/docs/assets/js/40.bf732750.js" as="script">
<link rel="preload" href="/docs/assets/js/935f2afb.0814b165.js" as="script">
<link rel="preload" href="/docs/assets/js/17896441.e5e89a73.js" as="script">
<link rel="preload" href="/docs/assets/js/19965739.35044b86.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Flashbots Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Flashbots Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flashbots Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/flashbots/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Flashbots Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Flashbots Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flashbots Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/flashbots/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Flashbots Alpha</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Welcome to docs.flashbots.net</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Miners</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/miner-onboarding">Miner Onboarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mev-geth">MEV Geth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mev-geth-demo">MEV Geth Demo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mev-proxy">MEV Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mev-relay">MEV Relay</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Searcher</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/searcher-onboarding">Searcher Onboarding</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/searcher-sponsored-tx">Search Sponsored TX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/simple-arbitrage">Simple Arbitrage</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/web3-flashbots">Web3.py</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ethers-provider-flashbots-bundle">Ethers Provider - Flashbot-bundle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How to contribute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribution-guide">Contribution guide</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Search Sponsored TX</h1></header><div class="markdown"><p>=======================
This repository contains a simple Flashbots &quot;searcher&quot; for submitting a transaction from account X, but paying for the transaction from account Y. This is accomplished by submitting a Flashbots transaction bundle, with the first transaction(s) executing from account X, and the last, single transaction calling a contract which verifies the early transactions ran successfully, then pays the miner.</p><p>We hope you will use this repository as an example of how to integrate Flashbots into your own Flashbot searcher (bot). For more information, see the <a href="https://github.com/flashbots/pm/blob/main/guides/flashbots-alpha.md" target="_blank" rel="noopener noreferrer">Flashbots Searcher FAQ</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-case"></a>Use case<a class="hash-link" href="#use-case" title="Direct link to heading">#</a></h1><p>The use case for this multi-transaction setup is to make calls from an account that has a compromised private key. Since transferring in any ETH to this compromised wallet will immediately be swept by bots that monitor that account. Transferring in funds will also give any attacker the ability to withdraw tokens that are held by that account.</p><p>Using this searcher, you can create a bundle of 0-gas-price transaction that execute against the compromised account, then reward the miner in a later transaction from a non-compromised account. The last transaction should execute a contract function to ensure the earlier transaction ran successfully (both to avoid mistakes AND to ensure the miner can&#x27;t simply take the reward transaction without processing the 0-gas-price transactions).</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="environment-variables"></a>Environment Variables<a class="hash-link" href="#environment-variables" title="Direct link to heading">#</a></h1><ul><li>ETHEREUM_RPC_URL - Ethereum RPC endpoint. Can not be the same as FLASHBOTS_RPC_URL</li><li>PRIVATE_KEY_ZERO_GAS - Private key for the compromised Ethereum EOA that owns assets that needs to be transferred</li><li>PRIVATE_KEY_DONOR - Private key for an account that has ETH that will be used to fund the miner for the &quot;ZERO_GAS&quot; transactions </li><li>FLASHBOTS_KEY_ID / FLASHBOTS_SECRET - Flashbots submissions requires an API key. <a href="https://docs.google.com/forms/d/e/1FAIpQLSd4AKrS-vcfW1X-dQvkFY73HysoKfkhcd-31Tj8frDAU6D6aQ/viewform" target="_blank" rel="noopener noreferrer">Apply for an API key here</a> </li><li>RECIPIENT - Ethereum EOA to receive assets from ZERO_GAS account</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setting-miner-reward"></a>Setting Miner Reward<a class="hash-link" href="#setting-miner-reward" title="Direct link to heading">#</a></h1><p>Inside <code>src/index.ts</code> is :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const MINER_REWARD_IN_WEI = ETHER.div(1000).mul(12); // 0.012 ETH</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is the amount, in <code>wei</code>, sent to <code>block.coinbase</code> from the DONOR EOA. This value is specified in TypeScript, instead of an ENVIRONMENT variable, due to how important it is. Setting this to a very large value could result in massive losses of funds to the DONOR EOA. For safety, <strong>do not store large amounts of eth in DONOR EOA</strong></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="selecting-a-different-engine"></a>Selecting a different &quot;engine&quot;<a class="hash-link" href="#selecting-a-different-engine" title="Direct link to heading">#</a></h1><p>This system can operate against different protocols by swapping a new &quot;engine&quot; class that adheres to &quot;Base&quot; functionality in the <code>main()</code> function. Available engines:</p><ul><li><code>TransferERC20</code></li><li><code>CryptoKitties</code></li></ul><p>An engine accepts relevant parameters during construction and provides functions to retrieve transaction descriptions to be passed in to Flashbots. Selecting and configuring a different engine requires directly modifying the source, uncommenting the engine and setting the necessary variables.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h1><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ npm install</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ PRIVATE_KEY_ZERO_GAS=__COMPROMISED_PRIVATE_KEY__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PRIVATE_KEY_DONOR=__FUNDED_PRIVATE_KEY__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    RECIPIENT=__ADDRESS_THAT_RECEIVES_ASSETS__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    FLASHBOTS_KEY_ID=__YOUR_PERSONAL_KEY_ID__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    FLASHBOTS_SECRET=__YOUR_PERSONAL_SECRET__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      npm run start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/flashbots/docs/edit/main/docs/searcher-sponsored-tx.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/searcher-onboarding"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Searcher Onboarding</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/simple-arbitrage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simple Arbitrage Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/7hvTycdNcK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Flashbots. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/styles.e83b258e.js"></script>
<script src="/docs/assets/js/runtime~main.ec0e648e.js"></script>
<script src="/docs/assets/js/main.dd915aba.js"></script>
<script src="/docs/assets/js/1.5a7c97b5.js"></script>
<script src="/docs/assets/js/2.4e16bc7b.js"></script>
<script src="/docs/assets/js/3.b91f50fa.js"></script>
<script src="/docs/assets/js/1be78505.49375c8c.js"></script>
<script src="/docs/assets/js/40.bf732750.js"></script>
<script src="/docs/assets/js/935f2afb.0814b165.js"></script>
<script src="/docs/assets/js/17896441.e5e89a73.js"></script>
<script src="/docs/assets/js/19965739.35044b86.js"></script>
</body>
</html>