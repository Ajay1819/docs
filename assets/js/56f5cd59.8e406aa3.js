(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),b=u(n),p=r,h=b["".concat(s,".").concat(p)]||b[p]||f[p]||o;return n?a.a.createElement(h,i(i({ref:t},l),{},{components:n})):a.a.createElement(h,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=p;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},112:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},114:function(e,t,n){"use strict";var r=n(0),a=n(115);t.a=function(){var e=Object(r.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},115:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)(void 0);t.a=a},116:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(114),s=n(112),i=n(56),c=n.n(i);var l=37,u=39;t.a=function(e){var t=e.lazy,n=e.block,i=e.defaultValue,b=e.values,f=e.groupId,p=e.className,h=Object(o.a)(),m=h.tabGroupChoices,d=h.setTabGroupChoices,y=Object(r.useState)(i),v=y[0],g=y[1],O=r.Children.toArray(e.children),w=[];if(null!=f){var j=m[f];null!=j&&j!==v&&b.some((function(e){return e.value===j}))&&g(j)}var T=function(e){var t=e.target,n=w.indexOf(t),r=O[n].props.value;g(r),null!=f&&(d(f,r),setTimeout((function(){var e,n,r,a,o,s,i,l;(e=t.getBoundingClientRect(),n=e.top,r=e.left,a=e.bottom,o=e.right,s=window,i=s.innerHeight,l=s.innerWidth,n>=0&&o<=l&&a<=i&&r>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c.a.tabItemActive),setTimeout((function(){return t.classList.remove(c.a.tabItemActive)}),2e3))}),150))},_=function(e){var t,n;switch(e.keyCode){case u:var r=w.indexOf(e.target)+1;n=w[r]||w[0];break;case l:var a=w.indexOf(e.target)-1;n=w[a]||w[w.length-1]}null===(t=n)||void 0===t||t.focus()};return a.a.createElement("div",{className:"tabs-container"},a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(s.a)("tabs",{"tabs--block":n},p)},b.map((function(e){var t=e.value,n=e.label;return a.a.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:Object(s.a)("tabs__item",c.a.tabItem,{"tabs__item--active":v===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:_,onFocus:T,onClick:T},n)}))),t?Object(r.cloneElement)(O.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):a.a.createElement("div",{className:"margin-vert--md"},O.map((function(e,t){return Object(r.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},117:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.children,n=e.hidden,r=e.className;return a.a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},86:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(3),a=n(7),o=(n(0),n(111)),s=(n(116),n(117),{title:"coinbase.transfer()"}),i={unversionedId:"flashbots-core/searchers/advanced/coinbase-payment",id:"flashbots-core/searchers/advanced/coinbase-payment",isDocsHomePage:!1,title:"coinbase.transfer()",description:"Flashbots allows you to pay miners for your transactions through a smart contract by using block.coinbase.transfer(AMOUNTTOTRANSFER). This smart contract function transfers Ethereum from the contract to the coinbase address of the miner who mines that block. Miners running MEV-Geth will treat fees through coinbase transfers in the same way they do normal transaction fees, which is to say that 1 wei of coinbase payments is equivalent to 1 wei paid through transaction fees. This provides significant benefits to Flashbots users:",source:"@site/docs/flashbots-core/searchers/advanced/coinbase-payment.md",slug:"/flashbots-core/searchers/advanced/coinbase-payment",permalink:"/flashbots-core/searchers/advanced/coinbase-payment",version:"current",sidebar:"docs",previous:{title:"understanding bundles",permalink:"/flashbots-core/searchers/advanced/understanding-bundles"},next:{title:"bundle pricing",permalink:"/flashbots-core/searchers/advanced/bundle-pricing"}},c=[],l={toc:c};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Flashbots allows you to pay miners for your transactions through a smart contract by using ",Object(o.b)("inlineCode",{parentName:"p"},"block.coinbase.transfer(AMOUNT_TO_TRANSFER)"),". This smart contract function transfers Ethereum from the contract to the coinbase address of the miner who mines that block. Miners running MEV-Geth will treat fees through coinbase transfers in the same way they do normal transaction fees, which is to say that 1 wei of coinbase payments is equivalent to 1 wei paid through transaction fees. This provides significant benefits to Flashbots users:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"You can condition payment to the miner on some criteria being met"),Object(o.b)("li",{parentName:"ul"},"Related, you can only pay for successful transactions, not failures"),Object(o.b)("li",{parentName:"ul"},"You can pay for a transaction from account X with ETH from account Y (see: searcher sponsored transaction repo ",Object(o.b)("a",{parentName:"li",href:"https://github.com/flashbots/searcher-sponsored-tx"},"here"),")")),Object(o.b)("p",null,"Here's an example from our open source simple arbitrage bot of how paying through coinbase transfers work:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-solidity"},"function uniswapWeth(uint256 _wethAmountToFirstMarket, uint256 _ethAmountToCoinbase, address[] memory _targets, bytes[] memory _payloads) external onlyExecutor payable {\n    require (_targets.length == _payloads.length);\n    uint256 _wethBalanceBefore = WETH.balanceOf(address(this));\n    WETH.transfer(_targets[0], _wethAmountToFirstMarket);\n    for (uint256 i = 0; i < _targets.length; i++) {\n        (bool _success, bytes memory _response) = _targets[i].call(_payloads[i]);\n        require(_success); _response;\n    }\n\n    uint256 _wethBalanceAfter = WETH.balanceOf(address(this));\n    require(_wethBalanceAfter > _wethBalanceBefore + _ethAmountToCoinbase);\n    if (_ethAmountToCoinbase == 0) return;\n\n    uint256 _ethBalance = address(this).balance;\n    if (_ethBalance < _ethAmountToCoinbase) {\n        WETH.withdraw(_ethAmountToCoinbase - _ethBalance);\n    }\n    block.coinbase.transfer(_ethAmountToCoinbase);\n}\n")),Object(o.b)("p",null,"The above smart contract code will attempt to capitalize on arbitrage opportunities. If it does not make money doing so then the transaction will fail. Moreover, since the searcher is paying the miner via ",Object(o.b)("inlineCode",{parentName:"p"},"block.coinbase.transfer()")," on the last line then the searcher won't pay any transaction fees."),Object(o.b)("p",null,"For more information on how coinbase transfers are priced see the ",Object(o.b)("a",{parentName:"p",href:"/flashbots-core/searchers/advanced/bundle-pricing"},"bundle pricing page"),"."))}u.isMDXComponent=!0}}]);